repos:
- repo: https://github.com/sqlfluff/sqlfluff
  rev: 2.3.0
  hooks:
    - id: sqlfluff-lint
      entry: env DBT_PRAC_KEY=hooks sqlfluff lint --processes 0
      additional_dependencies: ['dbt-core', 'dbt-postgres', 'sqlfluff-templater-dbt']
    - id: sqlfluff-fix
      # Set a couple of default flags:
      #  - `--force` to disable confirmation
      #  - `--show-lint-violations` shows issues to not require running `sqlfluff lint`
      #  - `--processes 0` to use maximum parallelism
      # By default, this hook applies all rules.
      entry: env DBT_PRAC_KEY=hooks sqlfluff fix --force --show-lint-violations --processes 0
      additional_dependencies: ['dbt-core', 'dbt-postgres', 'sqlfluff-templater-dbt']
